<html>
    <head>
      <link rel="stylesheet" href="style.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
      <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-timeago/1.6.7/jquery.timeago.min.js" type="text/javascript"></script>
    </head>
    <style>
        ul {
  padding-left: 20px;
}
#artwork, #artwork2 {
  margin-bottom: 10px;
}
span {
  color: #a31d1d;
}
    </style>
    <body>
      <div class="content">
        <ul>
          <li><a href="landing.html" target="Display">home</a></li>
          <li><a href="flags/flags.html" target="Display">flags</a></li>
            <ul>
            <li><a href="flags/FOTD.html" target="Display">FOTD</a></li>
            <li>FBD</li>
            </ul>
          </li>
          <li><a href="code/widgets.html" target="Display">widgets</a></li>
          <li>posts</li>
          <ul>
            <li>2023</li>
            <ul>
              <li>jan</li>
              <li>feb</li>
            </ul>
            <li>2022</li>
          </ul>
        </ul> 
      </div>

      <div class="content">
        <img src="images/passover.gif" alt="">
      </div>
      <div class="content">
        <section id="status"><span>offline</span></section>
        <section id="activity"></section>
        <hr>
        <p class="clock" timezone="+12" style="margin: 0; display: inline;"></p> in <span>NZ</span>
      </div>
      <marquee onmouseover="this.stop();" onmouseout="this.start();">status: <a href="https://www.imood.com/users/septic"><img src="https://moods.imood.com/display/uname-septic/imood.gif" alt="The current mood of septic at www.imood.com" border="0"></a></marquee>
    

      <div class="content">
        <section id="listen">CANT FETCH</section>
        <hr>
        <a href="" id="artworklink" target="_blank" style="display: block;"><img id="artwork" src="">
        <marquee id="track" direction="left" style="color: white;"></marquee></a>
        
      </div>

      <div class="content">
        most recent <span>earthquake</span> in NZ
        <hr>
        <section id="eqMag">Mag:</section>
        <section id="eqLoc"></section>
        <section id="eqDep"></section>
        <abbr class="timeago" id="time" title="">time</abbr>
      </div>

    </body>
        <script>
      $(document).ready(function() {
  var equrl = "https://api.geonet.org.nz/quake?MMI=0";
  $.getJSON(equrl, function(data) {
    var mag = data.features[0].properties.magnitude;
    var loc = data.features[0].properties.locality;
    var dep = data.features[0].properties.depth;
    var time = data.features[0].properties.time;

console.log(mag)
console.log(time)

    $("#eqMag").html("Mag: " + Math.round((mag + Number.EPSILON) * 100) / 100);
    $("#eqLoc").html(loc);
    $("#eqDep").html("Depth: " + Math.round((dep + Number.EPSILON) * 100) / 100 + "km");
    $("#time").attr("title", time);
    jQuery(document).ready(function() {
  jQuery("abbr.timeago").timeago(); 
  });
  });
});


$(document).ready(function() {
  var url = "http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=sep7ic&api_key=afc213709a996ae561e307f596c9952b&format=json";
  $.getJSON(url, function(data) {
    var artist = data.recenttracks.track[0].artist["#text"];
    var song = data.recenttracks.track[0]["name"];
    var artwork = data.recenttracks.track[0].image[1]["#text"];
    var link = data.recenttracks.track[0]["url"];


    $("#artwork").attr("src", artwork);
    $('#track').html("\
      <strong>"+song+"</strong><br />\
      "+artist+"\
    ");
    $("#artworklink").attr("href", link)

    if (typeof data.recenttracks.track[0]["@attr"] != "undefined"){
            $("#listen").html('<span style="color: green;">listening</span> to:')
            console.log("true")
            $("#status").html('<span style="color: green;">online</span>')
    } else {
      $("#listen").html("last <span>listened</span> to:")
        console.log("false")
    }
  });
});


$(document).ready(function() {
var statusurl = "https://api.lanyard.rest/v1/users/720506205528916029";
$.getJSON(statusurl, function(data) {
var status = data.data.discord_status;
var activity = data.data.activities[0].name;
var web = data.data.active_on_discord_web;
var desktop = data.data.active_on_discord_desktop;
var mobile = data.data.active_on_discord_mobile;

console.log("smoething"+desktop)
console.log("activity is:"+activity)

if (activity !== undefined) {
$("#activity").html("i am currently on <span>"+activity+"</span>")
}

if ( status == "online"){
    $("#status").html('<span style="color: green;">online</span>')
    } else {
      console.log("offline")
    }

if (desktop == true){
  $("#status").html('<span style="color: green;">online on desktop</span>')
}
if (web == true){
  $("#status").html('<span style="color: green;">online on web</span>')
}
if (mobile == true){
  $("#status").html('<span style="color: green;">online on phone</span>')
}

});
});


    </script>

<script>
  function dateToText(date) {
      var hours = date.getHours()
      var minutes = date.getMinutes();
      // var seconds = date.getSeconds();
      if (minutes < 10) minutes = '0'+minutes;
      //if  seconds < 10) seconds = '0'+seconds;
      if (hours < 10) hours = '0'+hours;
      return hours + ":" + minutes; // + ":" + seconds;
  }
  function updateClocks() {
    for (var i = 0; i < window.arrClocks.length; i++) {
      var clock = window.arrClocks[i];
      var offset = window.arrOffsets[i];
      clock.innerHTML = dateToText(new Date(new Date().getTime()+offset));
    }
  }
  function startClocks() {
    clockElements = document.getElementsByClassName('clock');
    window.arrClocks = []
    window.arrOffsets = [];
    var j = 0;
    for(var i = 0; i < clockElements.length; i++) {
      el = clockElements[i];
      timezone = parseInt(el.getAttribute('timezone'));
      if (!isNaN(timezone)) {
        var tzDifference = timezone * 60 + (new Date()).getTimezoneOffset();
        var offset = tzDifference * 60 * 1000;
        window.arrClocks.push(el);
        window.arrOffsets.push(offset);
      }
    }
    updateClocks();
    clockID = setInterval(updateClocks, 1000);
  }
  setTimeout(startClocks, 100);
  </script>
</html>